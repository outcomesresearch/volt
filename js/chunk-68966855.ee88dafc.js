(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68966855"],{"0c7a":function(e,t,n){e.exports=n.p+"img/play-button.ac3681af.svg"},"107e":function(e,t,n){},"3ca3":function(e,t,n){"use strict";var s=n("6547").charAt,r=n("69f3"),i=n("7dd0"),a="String Iterator",o=r.set,c=r.getterFor(a);i(String,"String",(function(e){o(this,{type:a,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=s(n,r),t.index+=e.length,{value:e,done:!1})}))},a2d8:function(e,t,n){"use strict";var s=n("107e"),r=n.n(s);r.a},c974:function(e,t,n){e.exports=n.p+"img/pause-button.d57c2ab8.svg"},ddb0:function(e,t,n){var s=n("da84"),r=n("fdbc"),i=n("e260"),a=n("9112"),o=n("b622"),c=o("iterator"),u=o("toStringTag"),d=i.values;for(var p in r){var f=s[p],m=f&&f.prototype;if(m){if(m[c]!==d)try{a(m,c,d)}catch(v){m[c]=d}if(m[u]||a(m,u,p),r[p])for(var h in i)if(m[h]!==i[h])try{a(m,h,i[h])}catch(v){m[h]=i[h]}}}},f5b9:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.done?e._e():s("div",{ref:"sniffComponent",staticClass:"image-wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.paused,expression:"paused"}],staticClass:"smelling-banner"},[e._v("Paused")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.paused,expression:"!paused"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.resting,expression:"resting"}],staticClass:"resting-banner"},[e._v("Resting...")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.resting&&e.pictures.length,expression:"!resting && pictures.length"}]},[s("div",{staticClass:"smelling-banner"},[e._v(" Smelling "+e._s(e.pictures[e.pictureIndex].name)+" ")]),s("img",{directives:[{name:"show",rawName:"v-show",value:"photo"===e.currentUser.studyArm&&!e.paused,expression:"currentUser.studyArm === 'photo' && !paused"}],attrs:{src:e.pictures[e.pictureIndex].src}})])]),s("div",{staticClass:"controls",on:{click:e.handlePause}},[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.paused,expression:"!paused"}],attrs:{src:n("c974")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.paused,expression:"paused"}],attrs:{src:n("0c7a")}})])])},r=[],i=(n("4de4"),n("d81d"),n("b0c0"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),a=n("5530"),o=n("2f62"),c=n("c1df"),u=n.n(c),d={name:"Sniff",data:function(){return{pictures:[],pictureIndex:-1,resting:!1,paused:!1,done:!0}},computed:Object(a["a"])({},Object(o["b"])(["currentUser"])),methods:{endSniffing:function(){this.pictures=[],this.$root.$emit("counter-status",!1),this.done=!0},handlePause:function(){this.paused=!this.paused,this.$root.$emit("pause")},completedSession:function(e){return e.endedTime&&e.startedTime&&e.odors&&4===Object.keys(e.odors).length},afterMidnight:function(e){return u()(e.endedTime).isAfter(u()().startOf("day"))},countCompletedSessions:function(){var e=this;if(this.currentUser.sessions){var t=Object.keys(this.currentUser.sessions).map((function(t){return e.currentUser.sessions[t]})).filter((function(t){return e.completedSession(t)&&e.afterMidnight(t)})).sort((function(e,t){return new Date(e.endedTime)-new Date(t.endedTime)}));1===t.length&&this.$store.dispatch("SAVE_COMPLETEDDAY")}}},beforeRouteLeave:function(e,t,n){return this.endSniffing(),n()},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.pictures=e.$route.params.pictures,e.done=!1,n=function(){},e.$root.$on("timer-done",(function(){e.resting=!e.resting,n()})),s=regeneratorRuntime.mark((function t(s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){e.pictureIndex=s,n=t,e.$root.$emit("start-timer",5)}));case 2:return t.next=4,new Promise((function(t){n=t,e.$root.$emit("start-timer",5)}));case 4:e.done||e.$store.dispatch("SAVE_ODOR",e.pictures[s].name),s===e.pictures.length-1&&(e.endSniffing(),e.countCompletedSessions(),e.$store.dispatch("SAVE_SESSIONEND"),e.$root.$emit("show-snackbar","session.ended"),setTimeout((function(){return e.$router.push("/")}),500));case 6:case"end":return t.stop()}}),t)})),r=0;case 6:if(!(r<e.pictures.length)){t.next=11;break}return t.delegateYield(s(r),"t0",8);case 8:r++,t.next=6;break;case 11:case"end":return t.stop()}}),t)})))()}},p=d,f=(n("a2d8"),n("2877")),m=Object(f["a"])(p,s,r,!1,null,"47ce6bd2",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-68966855.ee88dafc.js.map